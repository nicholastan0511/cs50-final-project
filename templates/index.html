{% extends "layout.html" %}

{% block title %}
    Index
{% endblock %}

{% block main %}
    <div class="container">
        <!-- user physical status table -->
        <div class="container">
            <h3 class="mb-3">Status</h3>
            <table class="table mb-3 table-dark table-bordered table-striped">
                <thead>
                    <tr>
                        <td>Age</td>
                        <td>Weight</td>
                        <td>Height</td>
                        <td>Goal</td>
                        <td>Exercise Freq.</td>
                        <td>BMI</td>
                    </tr>
                </thead>
                <tbody class="table-light">
                    <tr>
                        <td>{{ status[0]["age"] }}</td>
                        <td>{{ status[0]["weight"] }} kg</td>
                        <td>{{ status[0]["height"] }} cm</td>

                        {% if status[0]["goal"]  == 0 %}
                        <td>Body Weight Maintenance</td>
                        {% elif status[0]["goal"] == 1 %}
                        <td>Gain Weight and Muscle</td>
                        {% elif status[0]["goal"] == 1 %}
                        <td>Lose Weight</td>
                        {% endif %}

                        {% if status[0]["freq"] == 0 %}
                        <td>No exercise at all!</td>
                        {% elif status[0]["freq"] == 1 %}
                        <td>Two to three times a week</td>
                        {% else %}
                        <td>Everyday</td>
                        {% endif %}

                        <td>{{ bmi }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- modal -->
        <div class="container mb-4">
            <button class="btn btn-sm btn-primary btn-style" data-bs-toggle="modal" data-bs-target="#modalmod">Modify</button>
            <div class="modal fade modal-lg no-color" id="modalmod">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Modify Physical Status</h3>
                            <button class="btn-close btn-style" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <form method="post" action="/">
                                <div class="form-group row mb-3">
                                    <label for="age" class="form-label col-sm-2">Age</label>
                                    <div class="col-sm-10">
                                        <input autocomplete="off" autofocus type="number" id="age" name="age_mod" class="form-control-md w-100" min="0" max="100" placeholder="in years">
                                    </div>
                                </div>
                                <div class="form-group row mb-3">
                                    <label for="weight" class="form-label col-sm-2">Weight</label>
                                    <div class="col-sm-10">
                                        <input autocomplete="off" autofocus type="number" id="weight" name="weight_mod" class="form-control-md w-100" min="0" max="200" placeholder="in kg">
                                    </div>
                                </div>

                                <div class="form-group row mb-3">
                                    <label for="height" class="form-label col-sm-2">Height</label>
                                    <div class="col-sm-10">
                                        <input autocomplete="off" autofocus type="number" id="height" name="height_mod" class="form-control-md w-100" min="0" max="300" placeholder="in cm">
                                    </div>
                                </div>

                                <div class="form-group row mb-3">
                                    <label for="goal" class="form-label col-sm-2">Goal</label>
                                    <div class="col-sm-10">
                                        <select class="form-select" name="goal_mod" id="goal">
                                            <option value="0">Weight maintenance</option>
                                            <option value="1">Gain weight and muscle</option>
                                            <option value="2">Lose weight</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group row mb-3">
                                    <label for="freq" class="form-label col-sm-2">Exercise Freq.</label>
                                    <div class="col-sm-10">
                                        <select class="form-select" name="freq_mod" id="freq">
                                            <option value="0">No exercise at all!</option>
                                            <option value="1">Two to three times a week</option>
                                            <option value="2">Everyday</option>
                                        </select>
                                    </div>
                                </div>
                                <button class="btn btn-primary btn-style" id="addButton" data-bs-dismiss="modal" type="submit">Modify</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- daily intake table -->
        <div class="container">
            <h3 class="mb-3">Calculated Daily Intake Goals</h3>
            <table class="table mb-3 table-dark table-bordered table-striped">
                <thead>
                    <tr>
                        <td>Protein Goal</td>
                        <td>Calorie Goal</td>
                    </tr>
                </thead>
                <tbody class="table-light">
                    <tr>
                        <td>{{ protein_min }}g ~ {{ protein_max }}g</td>
                        <td>{{ calorie }} kcal</td>
                    </tr>
                </tbody>
            </table>
        </div>
    

    <!-- daily progress table -->
    <h3 class="mb-3">Today's Progress</h3>
    <table class="table table-dark table-bordered table-striped">
        <thead>
            <tr>
                <td>Protein</td>
                <td>Calories</td>
            </tr>
        </thead>
        <tbody class="table-light">
            <tr>
                <td>{{ pro_progress }} g / {{ protein_max }}g</td>
                <td>{{ cal_progress }} kcal / {{calorie}} kcal </td>
            </tr>
        </tbody>
    </table>
 

    <!-- daily consumption table -->
    <h3 class="mb-3">Today's Consumption</h3>
    <table class="table table-bordered table-dark table-striped align-middle">
        <thead>
            <tr>
                <td>Name</td>
                <td>Protein</td>
                <td>Calories</td>
                <td></td>
            </tr>
        </thead>
        <tbody class="table-light">
            {% for consumption in daily_diet %}
            <tr>
                <td>{{ consumption.food }}</td>
                <td>{{ consumption.protein }}</td>
                <td>{{ consumption.calories }} kcal</td>
                <td>
                    <form action="/" method="post">
                        <input type="hidden" value="{{ consumption.food }}" name="delFood">
                        <button type="submit btn-style" class="btn btn-primary">üóëÔ∏è</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- modal -->
    <div class="container">
        <button class="btn btn-sm btn-primary btn-style" data-bs-toggle="modal" data-bs-target="#modal">Add</button>
        <a href="/search" class="btn btn-sm btn-primary link-btn-style">Search for food</a>
        <div class="modal fade modal-lg no-color" id="modal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Add consumption</h3>
                        <button class="btn-close btn-style" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <form method="post" action="/">
                            <div class="form-group row mb-3">
                                <label for="author" class="form-label col-sm-2">Food</label>
                                <div class="col-sm-10">
                                    <input autocomplete="off" autofocus type="text" id="food" name="food_name" class="form-control-md" placeholder="Nasi Goreng">
                                </div>
                            </div>

                            <div class="form-group row mb-3">
                                <label for="protein" class="form-label col-sm-2">Protein</label>
                                <div class="col-sm-10">
                                    <input autocomplete="off" autofocus type="number" id="protein" name="protein_amount" class="form-control-md" placeholder="in grams">
                                </div>
                            </div>

                            <div class="form-group row mb-3">
                                <label for="calorie" class="form-label col-sm-2">Calories</label>
                                <div class="col-sm-10">
                                    <input autocomplete="off" autofocus id="calorie" name="calories_amount" class="form-control-md" type="number" placeholder="in kcal">
                                </div>
                            </div>
                            <button class="btn btn-primary btn-style" id="addButton" data-bs-dismiss="modal" type="submit">Add</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
                    


{% endblock %}
